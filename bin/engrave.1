.\"                              hey, Emacs:   -*- nroff -*-
.TH ENGRAVE 1 "Июнь, 2015"
.\" Please update the above date whenever this man page is modified.
.\"
.\" Some roff macros, for reference:
.\" .nh        disable hyphenation
.\" .hy        enable hyphenation
.\" .ad l      left justify
.\" .ad b      justify to both left and right margins (default)
.\" .nf        disable filling
.\" .fi        enable filling
.\" .br        insert line break
.\" .sp <n>    insert n+1 empty lines
.\" for manpage-specific macros, see man(7)
.SH НАЗВАНИЕ
engrave \- Подготовка изображений к адаптивному растрированию
.SH АННОТАЦИЯ
.B engrave
.RI [ options ]\ [ image.tif ]\ ...
.SH ОПИСАНИЕ
\fBengrave\fP генерирует PostScript-программу, которая будучи
выполнена растровым процессором для подготовки изображений к печати,
строит адаптивно растрированное изображение оригинала. При этом
формирование растровых элементов (точек) для воспроизведения
низкочастотной составляющей изображения производится самим растровым
процессором, в соответствие с заложенной в него растровой
функцией. Однако для воспроизведения мелких деталей изображения
используются специальные рстровые элементы, размер, форма и положение
которых определяется при подготовке изображения к адаптивному растрированию.
.PP
Для получения PostScript-кода программа использует фильтры. Информация
изображения оригинала последовательно проходит через определяемый
пользователем набор фильтров. Каждый из фильтров записывает свой фрагмент
PostScript-кода, получаемый на основе проходящих через него изобразительных
данных. При необходимости, каждый фильтр может внести какие-либо
изменения в эти данные, после чего они передаются на обработку
следующему фильтру. Однако, если фильтр является терминальным, то все
входящие в него данные записываются только в PostScript-форме, и не
посылаются на дальнейшую обработку.
.PP
Программа поддерживает обработку изображений в формате TIFF, но так же
может применяться для обработки неформатированных изобраительных
данных и, таким образом, легко встраивается во внешнюю систему. При
обработке неформатированных данных, параметры изображения не могут
быть определены автоматически и должны быть явным образом указаны в
коммандной строке. При использовании формата TIFF достаточно указать
только имя файла. Комманда поддерживает обработку набора файлов. Имена
файлов указываются после всех аргументов.
.SH АРГУМЕНТЫ
\fBengrave\fP поддерживает следующие аргументы коммандной строки:
.TP
.BR -r ", " --raw
включает режим обработки неформатированных изобразительных данных;
.TP
.BI \-w\  WIDTH ,\ \-\-width= WIDTH
устанавливает длину строки неформатированного изображения равную
WIDTH;
.TP
.BI \-h\  HEIGHT ,\ \-\-height= HEIGHT
устанавливает количество строк неформатированного изображения равным
HEIGHT;
.TP
.BI \-x\  HRES ,\ \-\-hres= HRES
устанавливает горизонтальное разрешение неформатированного изображения
равным HRES;
.TP
.BI \-y\  VRES ,\ \-\-height= VRES
устанавливает вертикальное разрешение неформатированного изображения
равым VRES;
.TP
.BI \-c\ [ CMYK ]\ ,\ \-\-cmyk[= CMYK ]
указывает, что неформатированное изображение является
четырёхкрасочным; дополнительно могут быть выбраны индивидуальные
цветоделённые изображения, информация о которых будет включена в
результирующую PostScript-программу; каналы обозначаются
символами 'C', 'M', 'Y' и 'K';
.TP
.BR -D ", " --density
указывает, что данные неформатированного изображения следует
интерпретировать как значения плотности (0 соответствует белому);
.TP
.BR -I ", " --intensity
указывает, что данные неформатированного изображения следует
интерпретировать как значения яркости (0 соответствует чёрному);
.TP
.BI \-F\  FPATH ,\ \-\-fiter-path= FPATH
устанвливает путь к командам фильтрации равным FPATH;
.TP
.BI \-P\  PSPATH ,\ \-\-ps-path= PSPATH
устанавливает путь к библиотечным PostScript-файлам равным PSPATH;
.TP
.BI \-o\ [ NAME ]\ ,\ \-\-output[= NAME ]
устанавливает имя выходного файла равным NAME (по умолчанию
определяется на основании имени входного файла или устанавливается
равным output, если данные считываются из стандартного входа);
для записи данных в стандартный выход используйте в качестве
имени файла символ '-';
.TP
.BI \-O\  SUF ,\ \-\-output-suffix= SUF
устанавливает суффикс для преобразования имени входного файла в имя
выходного файла равным SUF (по умолчанию eps);
.TP
.BR -p ", " --preview
указывает, что в заголовок выходного файла необходимо включить
уменьшенную копию оригинала;
.TP
.BR -v ", " --verbose
включает режим повышенной информативности: помимо сообщений об ошибках
выводятся информационные сообщения;
.TP
.BR  -q ", " --quiet
включает режим пониженной информативности: исключается вывод любых
сообщений, в том числе и сообщений об ошибках;
.TP
.BR  -V ", " --version
выводит информацию о версии;
.TP
.BR  -H ", " --help
вывод краткой справки об использовании программы.
.PP
После основных аргументов описывается цепочка фильтрации:
.TP
.BI \-f\  FILTER\  [ OPTIONS ]\ ,\ \-\-filter= FILTER\  [ OPTIONS ]
указывает, что следующим элементом цепочки является фильтр FILTER с
аргументами OPTIONS.
.PP
Стандартными фильтрами являются \fBtile32\fP и \fBct\fP. Фильтр
\fBtile32\fP используется для генерации растровых элементов (тайлов)
для воспроизведения мелких деталей изображения, а \fBct\fP является
терминальным фильтром и предназначен для включения в
PostScript-программу данных полутонового изображения.
.PP
Все комманды фильтрации поддерживают стандартные аргументы, сходные с
вышеописанными аргументами основной программы, а так же аргументы для
определения параметров межпроцессного взаимодействия.
.PP
Комманда фильтрации \fBtile32\fP поддерживает ряд дополнительных
аргументов для управления параметрами обработки изображения. Данные
аргументы задаются с использованием ''длинной'' формы:
.TP
.BR --half
включает режим обработки только левой половины изображения;
.TP
.BI --hist= FILE
включает вывод информации о частоте использования тайлов в файл FILE;
.TP
.BR --ignore-outtest
отключает проверку пересечения контуром центральной области
окрестности;
.TP
.BI --minarea= VALUE
устанавливает минимально допустимую площадь штриха, от 0 до 255 (не распространяется
на углы, по умолчанию имеет значение 47);
.TP
.BI --value-thr= VALUE
устанавливает порог равенства при сравнении отдельных отсчётов, от 0
до 255 (по умолчанию 13, что соответствует ступени в 5%);
.TP
.BI --sum-thr= VALUE
устанавливает порог равенства при сравнении сумм отсчётов, от 0 до
3x255 (по умолчанию 38.4);
.TP
.BI --dia-corr= VALUE
устанавивает коэффициент корреляции для диагональных отсчётов (по
умолчанию 1.5);
.TP
.BI --passthrough= CMYK
позволяет отключить обработку указанных цветовых каналов; каналы
обозначаются символами 'C', 'M', 'Y' и 'K'.

.\" .SH "SEE ALSO"
.\" .BR foo (1), 
.\" .BR bar (1).
.SH АВТОРЫ
Кузнецов Юрий Вениаминович <\fByurivk@mail.ru\fR>,
Волнейкин Павел Анатольевич
<\fBmanowar@altlinux.org\fR>.
.SH ЛИЦЕНЗИЯ
Copyright (C) 2015 Кузнецов Юрий Вениаминович, Волнейкин Павел
Анатольевич.
.PP
Данная программа является свободным программным обеспечением: вы
можете свободно распростанять и/или изменять её на условиях
Стандартной общественной лицензии GNU Афферо (GNU Affero General
Public License), текст которой опубликован Фондом Свободного
программного обеспечения (Free Software Foundation), версии
3 или (по вашему желанию) любой, более поздней версии данной
Лицензии.
.PP
Программа распространяется в надежде, что она будет полезна, но БЕЗ
ВСЯЧЕСКИХ ГАРАНТИЙ, включая подразумеваемую гарантию КАЧЕСТВА либо
ПРИГОДНОСТИ ДЛЯ ОПРЕДЕЛЕННЫХ ЦЕЛЕЙ. Для дополнительных сведений,
обращайтесь к полному тексту лицензии GNU Affero General
Public License, копию которой вы должны были получить вместе с
программой, и можете загрузить по адресу
<\fBhttp://www.gnu.org/licenses/\fR>.
.SH КОНТАКТНАЯ ИНФОРМАЦИЯ
.PP
Проект Растрирования высокой чёткости (High Definition Screening)
<\fBhttps://github.com/wolneykien/engrave/\fR>.
.PP
Кузнецов Юрий Вениаминович <\fByurivk@mail.ru\fR>.
.PP
Волнейкин Павел Анатольевич <\fBmanowar@altlinux.org\fR>.
.PP
Кафедра Технологии полиграфического производства
Северо-Западного Института печати
Санкт-Петербургского Университета технологии и дизайна

191180, Санкт-Петербург, переулок Джамбула, д. 13.
